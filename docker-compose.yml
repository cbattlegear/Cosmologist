services:
  app:
    build:
      context: .
      args:
        VITE_APP_VERSION: ${VITE_APP_VERSION:-0.0.0}
    image: cosmologist:latest
    ports:
      - "8080:80"
    restart: unless-stopped

  api:
    build:
      context: ./api
    image: cosmologist-api:latest
    ports:
      - "3001:3001"
    env_file:
      - ./api/.env
    restart: unless-stopped

  session-viewer:
    build:
      context: ./session-viewer
    image: cosmologist-session-viewer:latest
    ports:
      - "3002:3002"
    environment:
      - COSMOS_DB_ENDPOINT=${COSMOS_DB_ENDPOINT}
      - COSMOS_DB_KEY=${COSMOS_DB_KEY}
    restart: unless-stopped
